<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Interface de Profil de Joueur</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='result.css') }}"
    />
  </head>
  <body>
    <div class="content-wrapper">
      <div class="summoner-info-wrapper">
        <div class="avatar">
          <img
            id="avatar_image"
            src="https://ddragon.leagueoflegends.com/cdn/14.2.1/img/profileicon/{{icon}}"
            alt=""
          />
        </div>
        <div class="player">
          <h1 class="summoner-name">{{ game_name }}</h1>
          <h1 class="summoner-name">#{{ tag_line }}</h1>
        </div>
      </div>

      <div class="champions-wrapper">
        {% for champion in champions %}
        <div class="champion">
          <div class="circle-image">
            <img
              id="champion-image"
              src="https://ddragon.leagueoflegends.com/cdn/img/champion/splash/{{ champion }}_0.jpg"
              alt="{{ champion }}"
            />
          </div>
          <div class="champion-name">{{ champion }}</div>
        </div>
        {% endfor %}
      </div>

      <div class="performance-wrapper">
        <div class="flex-column">
          <div class="performance-curve title">
            Historique des 10 derniers matchs
          </div>
          {% for info in info_match %}
          <div class="performance-curve">
            <div class="card-match">
              <div class="profile">
                <div class="circle-image">
                  <img
                    id="champion-image"
                    src="{{ info[0] }}"
                    alt="{{ info[0] }}"
                  />
                </div>
                <h3 class="champion-name">{{ info[8] }}</h3>
                <h3 class="date-match">{{ info[10] }}</h3>
              </div>
              <div class="line"></div>
              <div class="stats">
                <div class="stat">
                  <p>Tués : <span>{{ info[2] }}</span></p>
                  <p>Morts : <span>{{ info[3] }}</span></p>
                  <p>Level : <span>{{ info[5] }}</span></p>
                </div>
                <div class="stat">
                  <p>Assistances : <span>{{ info[4] }}</span></p>
                  <p>Or gagnés : <span>{{ info[6] }}</span></p>
                  <p>Type : <span>{{ info[11] }}</span></p>
                </div>
                <div class="stat">
                  <p>Total dégats : <span>{{ info[7] }}</span></p>
                  <p>KDA : <span>{{ info[9] }}</span></p>
                </div>
              </div>
              <div
                class="did-win {% if info[1] == 'Défaite' %}defaite{% else %}victoire{% endif %}"
              >
                OMG LA {{ info[1] }}
              </div>
            </div>
          </div>
          {% endfor %}
        </div>

        <div class="flex-column">
          <div class="performance-curve title">
            Stats du dernier champion joué
          </div>
          <div class="performance-curve">
          </div>

          <div class="performance-curve title">
            Part des victoire/défaite des 10 derniers matchs
          </div>
                <div class="performance-curve">
                  <canvas id="win-loss-chart"></canvas>
                </div>
                <div class="performance-curve title">
                  Nombre de CS/min des 10 derniers matchs
                </div>
                <div class="performance-curve">
                  </div>
                </div>
                
              </div>
              <div class="advice-section">
                <h2>Conseils pour les prochaines games</h2>
                <p>
                  Qu'est-ce que tu dois faire pour prendre des LP sur tes prochaines
                  games?
                </p>
              </div>
            </div>
            
          </div>
          <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
          <script>
            const win_loss_chart = document.getElementById('win-loss-chart').getContext('2d');
            const win_loss = {
            labels: ['Victoire', 'Défaite'],
            datasets: [
              {
                      data: {{ win_loss_percentage | safe }},
                    }
                  ]
                };
          const config = {
            type: 'doughnut',
            data: win_loss,
            options: {
              responsive: true,
              plugins: {
                legend: {
                  position: 'top',
                },
                title: {
                  display: true,
                  text: 'Chart.js Doughnut Chart'
                }
              }
            },
          };
          new Chart(win_loss_chart, config);
        </script>
      </body>
    </html>
  </body>
</html>
